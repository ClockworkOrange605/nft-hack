import { useEffect, useState } from 'react'
import { Link } from 'react-router-dom'
import { useAuth } from '../../providers/AuthProvider'

import Loader from '../Common/Loader'

import './Drafts.css'

function Drafts() {
  const { account } = useAuth()
  const [data, setData] = useState([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    if (account) {
      fetch(`/${account}/nft/list`, {
        headers: {
          'x-auth-token': sessionStorage.getItem(account)
        }
      }).then(
        async (res) => {
          const data = await res.json()
          setData(data)
          setLoading(false)
        }
      )
    }
  }, [account])

  return (
    <div className="Drafts">
      {loading && <Loader />}

      {!loading && <h1>Choose NFT Draft</h1>}

      {data && data.map(item =>
        <Link to={`/account/nft/${item._id}/edit`}>
          <div key={item._id} className="Draft">
            <img src={/*item?.image ? item.image :*/ "data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjYWFhYWFhIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTI4LjIgMTIwLjIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEyOC4yIDEyMC4yOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PHBhdGggZD0iTTExMS44LDU5LjFjLTAuMy0wLjUtMC43LTAuOC0xLjItMC45bC05LjgtMi41Yy0xLjEtMC4zLTIuMiwwLjQtMi40LDEuNWwtMi4yLDguOUw4Ny43LDY0YzAsMCwwLDAsMCwwbC0wLjQtMC4xICAgYy0wLjUtMC4xLTEuMSwwLTEuNSwwLjJjLTAuNSwwLjMtMC44LDAuNy0wLjksMS4ybC0yLjIsOC45bC04LjktMi4yYy0xLjEtMC4zLTIuMiwwLjQtMi40LDEuNUw2OSw4Mi4zbC04LjktMi4yICAgYy0wLjUtMC4xLTEuMSwwLTEuNSwwLjJjLTAuNSwwLjMtMC44LDAuNy0wLjksMS4ybC0wLjIsMC44YzAsMCwwLDAsMCwwbC0yLjMsOS40Yy0wLjMsMS4xLDAuNCwyLjIsMS41LDIuNGwzOC44LDkuNyAgIGMwLjUsMC4xLDAuOSwwLjIsMS40LDAuMmMyLjUsMCw0LjgtMS43LDUuNC00LjJsOS44LTM5LjJDMTEyLjIsNjAuMSwxMTIuMSw1OS42LDExMS44LDU5LjF6IE03NC43LDc2LjNsOC43LDIuMiAgIGMwLjUsMC4yLDEuMiwwLjEsMS43LTAuMmMwLjUtMC4zLDAuOS0wLjksMC45LTEuNWwxLjctNi45bDUuNiw3LjRsLTIuOCwxMS4ybC0xNy44LTQuNUw3NC43LDc2LjN6IE05OC40LDk4LjggICBjLTAuMiwwLjktMS4xLDEuNC0xLjksMS4ybC0zNi45LTkuMmwxLjQtNS41bDMwLjYsNy43YzAuMSwwLDAuMywwLjEsMC40LDAuMWMwLDAsMCwwLDAsMGMwLDAsMC4xLDAsMC4xLDBjMC4xLDAsMC4yLDAsMC40LTAuMSAgIGMwLDAsMC4xLDAsMC4xLDBjMC4yLDAsMC4zLTAuMSwwLjQtMC4yYzAuNS0wLjMsMC44LTAuNywwLjktMS4ybDMuNS0xNC4xYzAuMS0wLjYsMC0xLjItMC4zLTEuN2wtNC45LTYuNGw0LjgsMS4yICAgYzEuMSwwLjMsMi4yLTAuNCwyLjQtMS41bDIuMi04LjlsNiwxLjVMOTguNCw5OC44eiI+PC9wYXRoPjxwYXRoIGQ9Ik01Ny41LDc1LjljMS4xLDAsMi0wLjksMi0ybDAtOS4yaDkuMWMxLjEsMCwyLTAuOSwyLTJ2LTkuMWg5LjFjMS4xLDAsMi0wLjksMi0ybDAtOS4yaDguMmMxLjEsMCwyLTAuOSwyLTJWMjIuNyAgIGMwLTMuMS0yLjUtNS42LTUuNi01LjZIMjIuNmMtMy4xLDAtNS42LDIuNS01LjYsNS42djU4LjJjMCwzLjEsMi41LDUuNiw1LjYsNS42aDIzLjdjMS4xLDAsMi0wLjksMi0ydi04LjVMNTcuNSw3NS45eiBNNjYuNiw2MC43ICAgaC05LjFjLTEuMSwwLTIsMC45LTIsMmwwLDkuMmwtMjQuNywwbDAtNi4xbDcuOC01LjlsNi44LDMuOWMwLjgsMC40LDEuNywwLjMsMi40LTAuM2wxNC45LTE0LjRsMy45LDMuMVY2MC43eiBNNDQuMyw4Mi40SDIyLjYgICBjLTAuOSwwLTEuNi0wLjctMS42LTEuNlYyMi43YzAtMC45LDAuNy0xLjYsMS42LTEuNmg2My43YzAuOSwwLDEuNiwwLjcsMS42LDEuNnYxNS44aC04LjFjLTEuMSwwLTIsMC45LTIsMmwwLDkuMmgtOGwtNS45LTQuNyAgIGMtMC44LTAuNi0xLjktMC42LTIuNiwwLjFMNDYuMSw1OS42bC02LjYtMy44Yy0wLjctMC40LTEuNi0wLjQtMi4yLDAuMWwtOS43LDcuM2MtMC41LDAuNC0wLjgsMS0wLjgsMS42bDAsOS4xYzAsMCwwLDAsMCwwbDAsMC4xICAgYzAsMC41LDAuMiwxLDAuNiwxLjRjMC40LDAuNCwwLjksMC42LDEuNCwwLjZoMTUuNVY4Mi40eiI+PC9wYXRoPjxwYXRoIGQ9Ik0zNy4zLDQ3LjRjNSwwLDktNC4xLDktOWMwLTUtNC4xLTktOS05Yy01LDAtOSw0LjEtOSw5QzI4LjIsNDMuMywzMi4zLDQ3LjQsMzcuMyw0Ny40eiBNMzcuMywzMy4zYzIuOCwwLDUsMi4zLDUsNSAgIGMwLDIuOC0yLjMsNS01LDVjLTIuOCwwLTUtMi4zLTUtNUMzMi4yLDM1LjUsMzQuNSwzMy4zLDM3LjMsMzMuM3oiPjwvcGF0aD48L2c+PC9zdmc+"} />
            <p>
              {item?.metadata?.name ||
                `${item._id.slice(0, 5)} . . . ${item._id.slice(-5)}`}
            </p>
          </div>
        </Link>
      )}

      {!loading && (
        <Link to='/account/nft/create'>
          <div key={0} className="Draft">
            <img src="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjYWFhYWFhIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTEyIDUxMiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGc+PGc+PHBhdGggZmlsbD0iI2FhYWFhYSIgZD0iTTM2Mi40MzcsMjQwSDI3M3YtODkuNTM1YzAtNi40NjMtMS41ODQtOS42OTYtOC4wNTEtOS43MDJsLTE5LjIyOSwwLjAwMyAgICBjLTYuNDY4LDAuMDAzLTkuMjg4LDMuNDM0LTkuMjg4LDkuOUwyMzYuNjcxLDIzN2gtODYuMDUzYy02LjQ2NCwwLTkuNjUzLDMuMDM3LTkuNjU4LDkuNTAybDAuMDI1LDIxLjQyNiAgICBjMC4wMDEsNi40NjksMy4yNTYsMTEuMDcyLDkuNzI0LDExLjA3MkgyMzd2NzkuNDcyYzAsNi40NjMsMy4xNTYsOS4wNjEsOS42MjMsOS4wNjRsMjAuMDEzLTAuMzIgICAgYzYuNDcxLTAuMDAzLDkuNjgzLTEuOTI1LDkuNjgzLTguMzkyTDI3Ni4zMDEsMjc5aDg2LjEzOWM2LjQ2MywwLDkuNjk2LTQuNzA1LDkuNzAyLTExLjE3bC0wLjAwNS0xOS4wOTEgICAgQzM3Mi4xMzYsMjQyLjI3MSwzNjguOTAxLDI0MCwzNjIuNDM3LDI0MHoiPjwvcGF0aD48cmVjdCB4PSIzNiIgeT0iMzUyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSIzNiIgeT0iMzEyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSIzNiIgeT0iNDMyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSIzNiIgeT0iMzkyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSIxMTIiIHk9IjQ2NiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+PHBhdGggZmlsbD0iI2FhYWFhYSIgZD0iTTM2LDQ2Ni4wMTl2NlY0NzZoOS43NTdjMy4yMzMsMCw2LjI0MywwLDYuMjQzLDB2LTEwSDM2VjQ2Ni4wMTl6Ij48L3BhdGg+PHJlY3QgeD0iMzYiIHk9IjI3MiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iOTgiIHk9IjM0IiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAiPjwvcmVjdD48cmVjdCB4PSI1OCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjcyIiB5PSI0NjYiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjI1OCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjE3OCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjIxOCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjEzOCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjI5OCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjMzOCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjM2IiB5PSI3MiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iMzYiIHk9IjE5MiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iMzYiIHk9IjE1MiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iMzYiIHk9IjExMiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iMzYiIHk9IjIzMiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHBhdGggZmlsbD0iI2FhYWFhYSIgZD0iTTQ2LDM0SDM2djEwLjAxOUMzNiw0OC4xNjIsMzYsNTIsMzYsNTJoMTBWMzR6Ij48L3BhdGg+PHJlY3QgeD0iNDY4IiB5PSIzMDIiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PjxyZWN0IHg9IjQ2OCIgeT0iMjYyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSI0NjgiIHk9IjIyMiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iNDY4IiB5PSIzODIiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PjxyZWN0IHg9IjQ2OCIgeT0iMzQyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSIxNTIiIHk9IjQ2NiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+PHJlY3QgeD0iNDY4IiB5PSIxMDIiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PjxyZWN0IHg9IjQ1OCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjQ2OCIgeT0iNjIiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PjxyZWN0IHg9IjQ2OCIgeT0iNDIyIiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMTAiIGhlaWdodD0iMjAiPjwvcmVjdD48cmVjdCB4PSI0NjgiIHk9IjE0MiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjEwIiBoZWlnaHQ9IjIwIj48L3JlY3Q+PHJlY3QgeD0iNDY4IiB5PSIxODIiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIxMCIgaGVpZ2h0PSIyMCI+PC9yZWN0PjxyZWN0IHg9IjMxMiIgeT0iNDY2IiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAiPjwvcmVjdD48cmVjdCB4PSIyNzIiIHk9IjQ2NiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+PHJlY3QgeD0iMjMyIiB5PSI0NjYiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjE5MiIgeT0iNDY2IiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAiPjwvcmVjdD48cmVjdCB4PSIzNTIiIHk9IjQ2NiIgZmlsbD0iI2FhYWFhYSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjEwIj48L3JlY3Q+PHJlY3QgeD0iMzkyIiB5PSI0NjYiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjM3OCIgeT0iMzQiIGZpbGw9IiNhYWFhYWEiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxMCI+PC9yZWN0PjxyZWN0IHg9IjQzMiIgeT0iNDY2IiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAiPjwvcmVjdD48cmVjdCB4PSI0MTgiIHk9IjM0IiBmaWxsPSIjYWFhYWFhIiB3aWR0aD0iMjAiIGhlaWdodD0iMTAiPjwvcmVjdD48cG9seWdvbiBmaWxsPSIjYWFhYWFhIiBwb2ludHM9IjQ2OCw0NzYgNDcxLjc1Nyw0NzYgNDc4LDQ3NiA0NzgsNDYyIDQ2OCw0NjIgICAiPjwvcG9seWdvbj48L2c+PC9nPjwvc3ZnPg==" />
            <p>Create New NFT</p>
          </div>
        </Link>
      )}
    </div>

  )
}

export default Drafts